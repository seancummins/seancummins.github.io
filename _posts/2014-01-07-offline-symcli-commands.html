---
layout: post
title: Offline SYMCLI Commands
date: 2014-01-07 21:21:05.000000000 -05:00
categories:
- Automation
- SYMCLI
- Symmetrix
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '1'
author:
  login: scummins
  email: sean@scummins.com
  display_name: Sean Cummins
  first_name: Sean
  last_name: Cummins
---
<p>One of the little-known features of  SYMCLI is its ability to interrogate an offline SYMAPI database. This can be useful for safely running query scripts without the risk of affecting a production array. Or if you're an EMC partner or employee, you can have customers send you a SYMAPI database so you can extract information about their array(s) while you're offsite. Many of our internal and partner tools -- things like Tier Advisor, BCSD, and SymmMerge -- also use SYMAPI databases to import array configuration data.</p>
<p><em>First, you of course need to have a SYMAPI database. There are a several ways to get it --</em></p>
<p><span style="line-height: 1.5em;">Typically, you will pull a SYMAPI DB from a host running Solutions Enabler with access to Symmetrix Gatekeeper devices (i.e. a SYMCLI management station). Before copying the SYMAPI DB, I'd recommend refreshing its contents with the following commands; this will ensure that the database reflects the current array configuration.</span></p>
<ul>
<li>symcfg discover</li>
<li>symcfg sync -local</li>
<li>symcfg sync -vpdata</li>
<li>symcfg sync -fast</li>
</ul>
<p>Now that the database has been updated, simply copy it to an offline location (e.g. your laptop). For Windows, the default SYMAPI DB path is C:\Program Files\EMC\SYMAPI\db\symapi_db.bin. For UNIX/Linux, you'll most likely find it at /usr/emc/API/symapi/db/symapi_db.bin.</p>
<p><span style="line-height: 1.5em;">Also, if you happen to have STP (Symmetrix Trends &amp; Performance) data, you most likely have a bunch of files that begin with T1 or T2 -- the files with a .btp or .ttp extension contain the performance data, and the files with a .bin extension are just SYMAPI databases.</span></p>
<p>Finally, if you happen to have access to the VMAX Service Processor (i.e. you're a partner or employee with the appropriate credentials), you can obtain it there -- use the same instructions as for a regular SYMCLI management station.</p>
<p><em><span style="line-height: 1.5em;">Using your offline SYMAPI database --</span></em></p>
<p><span style="line-height: 1.5em;">In order to execute offline commands, you'll need to have Solutions Enabler installed. You can obtain this from <a title="support.emc.com" href="https://support.emc.com/downloads/2071_Solutions-Enabler" target="_blank">support.emc.com</a>.</span></p>
<p>Start a Command Prompt or Shell session, and set the following environment variables.</p>
<p style="padding-left: 30px;">SYMCLI_OFFLINE=1</p>
<p style="padding-left: 30px;">SYMCLI_DB_FILE=&lt;path_to_SYMAPI_DB&gt;</p>
<p>Run "symcli -def" to validate that your environment variables are set (they should be displayed in this command's output).</p>
<p>Now you can execute most "query" type commands against the offline database. There are some query commands that require online access, but you'll find that most can be run offline. Of course commands that would make changes to an array's configuration (e.g. provisioning devices) will only work online. You can also change almost any command's output to XML by adding the "-output xml_e" flag -- this tends to be more reliable than screen scraping when programmatically parsing SYMCLI command output. In a <a title="Parsing SYMCLI’s XML Output with Python" href="http://blog.scummins.com/?p=68">follow-up post</a>, I'll provide some examples of how to parse SYMCLI XML output using Python.</p>
<p>Here are a few commands to get you started:</p>
<ul>
<li>symcfg list -v
<ul>
<li>Detailed info on the arrays in the DB</li>
</ul>
</li>
<li>symcfg list –thin –pool –detail –gb
<ul>
<li>Info about thin pool capacity (optional –v for verbose)</li>
</ul>
</li>
<li>symdisk list –dskgrp_summary
<ul>
<li>Physical disk info</li>
</ul>
</li>
<li>symcfg –dir all list –v
<ul>
<li>Info about Symm directors (optional –v for verbose)</li>
</ul>
</li>
<li>symsg list
<ul>
<li>List storage groups (optional –v for verbose)</li>
</ul>
</li>
<li>symtier –sid xxx list –offline
<ul>
<li>List tier info (optional –v)</li>
</ul>
</li>
<li>symfast –sid xxx list –vp
<ul>
<li>List fast policies (optional –v)</li>
</ul>
</li>
<li>symfast –sid xxx list –demand –assoc
<ul>
<li>FAST Demand report by SG Association -- shows the potential for each SG to tier up based on assigned policies</li>
</ul>
</li>
</ul>
